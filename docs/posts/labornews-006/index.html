<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="박영삼">
<meta name="dcterms.date" content="2023-06-09">

<title>서울시 5명 미만 사업장 노동자, 4명 중 1명 강남 3구에서 일한다 – park youngsam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">park youngsam</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">News | Column</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://facebook.com"> <i class="bi bi-facebook" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://yspark1968.blogspot.com/"> 
<span class="menu-text">Blogger</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">서울시 5명 미만 사업장 노동자, 4명 중 1명 강남 3구에서 일한다</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">5인미만</div>
                <div class="quarto-category">지역별고용조사</div>
                <div class="quarto-category">노동시장</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>박영삼 </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 9, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#서울시-5명-미만-사업장-노동자-4명-중-1명-강남-3구에서-일한다" id="toc-서울시-5명-미만-사업장-노동자-4명-중-1명-강남-3구에서-일한다" class="nav-link active" data-scroll-target="#서울시-5명-미만-사업장-노동자-4명-중-1명-강남-3구에서-일한다">서울시 5명 미만 사업장 노동자, 4명 중 1명 강남 3구에서 일한다</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="박영삼의-통계로-보는-노동" class="level4">
<h4 class="anchored" data-anchor-id="박영삼의-통계로-보는-노동">박영삼의 통계로 보는 노동</h4>
</section>
<section id="서울시-5명-미만-사업장-노동자-4명-중-1명-강남-3구에서-일한다" class="level2">
<h2 class="anchored" data-anchor-id="서울시-5명-미만-사업장-노동자-4명-중-1명-강남-3구에서-일한다">서울시 5명 미만 사업장 노동자, 4명 중 1명 강남 3구에서 일한다</h2>
<section id="지역별-고용조사-기초구-단위-분석-강남송파서초영등포동대문-순" class="level4">
<h4 class="anchored" data-anchor-id="지역별-고용조사-기초구-단위-분석-강남송파서초영등포동대문-순">지역별 고용조사 기초구 단위 분석 … 강남·송파·서초·영등포·동대문 순</h4>
<p>5명 미만 사업장에 종사하는 노동자들은 연차휴가와 연장근로수당 등 근로기준법의 핵심 조항을 적용받지 못하고 있다. 최저임금과 주휴수당, 사회보험 가입 등 법으로 보장된 권리조차 제대로 누리지 못하는 경우가 많다.</p>
<p>사업주가 영세하고 지불능력이 취약하며, 정부의 근로감독이 제대로 미치기 어렵다는 이유를 많이 들고 있다. 개인들이 운영하는 농림어업과 비사업체, 비공식 부문에 5명 미만 사업장이 다수 분포하고 있다는 것도 법적용을 어렵게 하는 이유로 덧붙이곤 한다.</p>
<section id="비공식-부문-비중-높아-근로기준법-적용-어렵다" class="level5">
<h5 class="anchored" data-anchor-id="비공식-부문-비중-높아-근로기준법-적용-어렵다">비공식 부문 비중 높아 근로기준법 적용 어렵다?</h5>
<p>2022년 상반기 통계청의 지역별 고용조사 조사 결과를 보면, 광역시·도 기준으로 5명 미만 노동자 비율이 제주가 24.2%로 가장 높다. 이어 강원(21.8%)·대구(21.0%)·전북(20.3%) 순이다. 농업과 숙박음식업 등을 중심으로 한 개인서비스업 종사자가 많은 비중을 차지하는 지역이다. 반면 5명 미만 노동자 비율이 가장 낮은 지역은 세종(12.9%)이다. 충남(14.9%)·서울(15.2%)·울산(15.7%) 순서로 뒤를 이었다. 이들 지역에는 행정부와 공공기관, 대기업 본사와 대공장들이 다수 포진하고 있다. 이 결과만 놓고 보면 5명 미만 사업장 다수에 근로기준법을 적용하기 어렵다는 주장에 설득력이 있을 수 있다.</p>
<p>하지만 5명 미만 사업장 노동자의 ’지역 내 비율’은 전체적인 사실을 이해하는 데 큰 도움을 주지 못한다. 사업체 일자리의 지역 간 편중이 심한 상황에서, 겉으로는 5명 미만 사업장 비율이 낮게 나타나는 대도시 인구밀집 지역에 5명 미만 사업장 일자리의 ’절대적인 규모’가 함께 분포하고 있기 때문이다. 아래 &lt;그림1&gt;에서 보듯이 5명 미만 사업장 비율이 제일 높은 제주도의 해당 사업장 노동자는 불과 6만3천명에 그치는 반면, 서울과 경기·인천은 각각 75만3천명, 97만5천명, 20만5천명에 달한다. 이를 모두 합하면 193만3천명으로 우리나라 전체 5명 미만 사업장 노동자의 절반을 넘는 51.7%를 차지한다. 말하자면 좋은 일자리, 많은 일자리가 있는 곳에 5명 미만 일자리도 함께 있는 것이다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="215502_92787_5452.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>통계청의 지역별 고용조사는 시·군·구 단위까지 고용현황을 파악할 수 있도록 가구조사로는 가장 큰 규모인 20만 가구표본을 구축하고 있다. 하지만 표본이 충분히 큰 규모임에도 사업장 규모 변수를 제공하지 않다가 2021년부터 일반 시·군과 함께 특별·광역시의 구단위까지 제공하게 됐다. 이로써 서울을 비롯한 모든 광역시의 각 구별로 5명 미만 사업장 노동자의 규모를 파악할 수 있게 됐다. 5명 미만 사업장의 노동자가 어디에 살고 어디에 근무하는지, 근무지와 거주지를 구분해서 살펴볼 수 있게 됐다.</p>
<p>그렇다면 서울시에서 일하는 5명 미만 사업장의 노동자들은 실제로 어디에서 일하고 어떤 지역에서 살고 있을까? 근무지와 거주지의 자치구가 같은 경우가 있을 수 있고, 근무지와 거주지는 다르지만 서울시 안에 있는 경우, 거주지가 다른 광역시도인 사례도 있을 수 있다.</p>
</section>
<section id="강남은-내부-유입형-강북-교외지역은-외부-유출형" class="level5">
<h5 class="anchored" data-anchor-id="강남은-내부-유입형-강북-교외지역은-외부-유출형">강남은 ‘내부 유입형’, 강북 교외지역은 ‘외부 유출형’</h5>
<p>우선 서울시에서 근무지 기준으로 5명 미만 사업장에서 일하는 노동자가 가장 많은 구는 강남구(7만2천명), 송파구(4만8천명), 서초구(3만9천명) 순이다. 전체 일자리가 이들 지역에 많이 있기도 하지만 5명 미만 사업장도 이 지역에 가장 많기 때문이다. 강남 3구의 5명 미만 사업장 노동자를 모두 합치면 15만9천명으로 서울시 전체 5명 미만 노동자 67만8천명의 23.4%에 해당한다.</p>
<p>하지만 이들 강남 3구 지역의 노동자들 가운데 근무지와 거주지가 같은 노동자, 즉 강남에 거주하면서 이 지역의 5명 미만 사업장으로 출근하는 노동자는 5만2천명에 불과하다. 서울의 다른 구나 경기와 인천 등 다른 광역시도에서 원거리 출·퇴근으로 유입되는 노동자가 10만7천명에 이른다. 특히 강남구와 서초구는 다른 지역 거주자들인 5명 미만 노동자를 고용하면서 거주자들이 다른 외부지역의 5명 미만 사업장으로 일하러 가는 비율은 매우 낮은 ’내부유입형’이다. 동시에 ’일자리가 많은 중심지’로서의 특징을 전형적으로 보여준다. 송파구는 강남 3구 중에서는 상대적으로 외부거주자 유입도 많고 내부거주자의 지역 내 5명 미만 사업장 근무자 비중도 높은 ’외부유입+거주자취업’이 혼합된 형태이다.</p>
<p>다음으로 영등포구와 동대문구·중구는 비강남 지역 가운데 일자리 중심지로서 타지역에서 출근하는 비중이 높은 ’외부유입형’이다. 영등포구와 동대문구의 경우 5명 미만 노동자가 각각 3만9천명에 이르지만 거주자는 1만명에 불과하고, 나머지는 다른 지역에서 유입되고 있다.</p>
<p>강서·구로·마포 지역은 외부에서 유입되는 노동자도 많고 해당 지역에서 외부지역으로 나가는 숫자도 많은 ’유입유출 혼합형’에 해당한다. 다만 중구의 경우 5명 미만 사업장 노동자 중 외 부유입자가 82%나 된다. 종로도 대부분 외부유입형으로 메우고 거주자의 외부유출은 거의 없는 유형에 속한다. 중구와 종로 지역은 거주자 비중이 낮은 일자리 중심지역이다.</p>
<p>다음으로 강남 3구와 정반대 유형으로 전체 일자리가 부족하고 다른 지역의 5명 미만 사업장 일자리에 거주자들이 많이 취업하는 지역으로 은평·성북·강북·중랑·도봉과 같은 지역이 있다. 이들 지역은 내부에 있는 5명 미만 사업장 일자리에 거주자들이 취업하는 비중이 높고 다른 지역의 5명 미만 사업장 일자리로 출근하는 비율도 높은 ’고용유출형’에 해당한다. 끝으로 양천·서대문·노원·성동·동작구는 5명 미만 사업장 일자리에 거주자와 외부유입이 비슷한 정도로 이뤄지고 ,다른 지역의 5명 미만 사업장 일자리로 출근하는 비중도 높은 중간혼합형 유형이다.</p>
</section>
<section id="취약노동자-일자리-중심지대에-몰려" class="level5">
<h5 class="anchored" data-anchor-id="취약노동자-일자리-중심지대에-몰려">취약노동자, 일자리 중심지대에 몰려</h5>
<p>이렇게 보면 서울시의 5명 미만 일자리는 서울시와 다른 수도권 광역시·도의 노동자들까지 유입시키는 강남 3구와 영등포·동대문·중구에 이르는 내부유입형, 강서·구로·마포·종로 지역의 혼합형까지 포함하면 약 60% 가까이 차지하게 된다. 5명 미만 일자리의 약 절반 이상이 수도권에 분포하고, 또 그 수도권 일자리의 절반 이상이 고용 상황이 괜찮은 지역에 집중 분포하고 있다고 볼 수 있다. 즉, 5명 미만 일자리의 대부분은 일자리 중심지대에 존재하고 있다고 볼 수 있다.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="215502_92788_5510.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>그렇지만 상당수 5명 미만 사업장 노동자들의 근로조건은 열악하다. 월평균 임금 수준을 보면 강남 3구를 중심으로 내부유입형에 해당하는 지역은 210만~260만원 수준이고, 그 다음으로 혼합형 지역이 190만~210만원 수준, 외부유출형이 200만원 미만의 분포를 보이고 있다. 서울시의 5명 미만 전체 월평균임금은 218만원 수준으로 서울시의 333만원과 전국 293만원 수준에 비해 65~74% 수준에 불과하다. 올해 기준 월환산 최저임금액 201만원 대비로는 108% 수준에 머물고 있다.</p>
<p>5명 미만 사업장 노동자들은 도시 주변부의 비공식 부문에서 일하는 것이 아니라 수도권의 일자리 중심부에 집중 분포하고 있다. 사업주의 어려움이 지속되고 근로감독 행정이 못 미칠 정도로 먼 곳에 있는 것이 아니라는 이야기다. 우선은 있는 법이라도 제대로 지키도록 하는 것이 필요하다. 그리고 2년째 실질가치가 하락하고 있는 최저임금을 이번에라도 충분히 인상하는 것이 가장 빠르고 확실한 조치가 될 것이다.</p>
<p>고려대 노동문제연구소 노동데이터센터장 (<a href="youngsampk@gmail.com">youngsampk@gmail.com</a>)<br>
</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>